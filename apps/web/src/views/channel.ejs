<% const LIVE_THRESHOLD_MS = 1000 * 60 * 8; %>
<%
  const latestClip = clipGroups.length ? clipGroups[0].clips[0] : null;
  const lastClipMs = latestClip ? latestClip.createdAtMs : null;
  const isLive = lastClipMs !== null && Date.now() - lastClipMs < LIVE_THRESHOLD_MS;
  const liveStatusLabel = isLive ? 'Live now' : 'Offline';
  const liveStatusClass = isLive ? 'status-badge--ready' : 'status-badge--offline';
%>

<% const body = () => {
  return include('channel-content', {
    channel,
    clipGroups,
    clipStats,
    lastClipLabel,
    liveStatusLabel,
    liveStatusClass
  });
} %>

<%- include('layout', { title: `${channel.displayName} clips`, body, sessionActive, showAdminLink: isAdmin }) %>
